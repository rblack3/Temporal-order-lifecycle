CREATE TABLE orders (id VARCHAR(255) PRIMARY KEY, state VARCHAR(50) NOT NULL, shipping_address_json TEXT, created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP);
CREATE TABLE payments (payment_id VARCHAR(255) PRIMARY KEY, order_id VARCHAR(255) REFERENCES orders(id), status VARCHAR(50) NOT NULL, amount NUMERIC(10, 2) NOT NULL, created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP, UNIQUE(order_id));
CREATE TABLE workflow_events (id SERIAL PRIMARY KEY, order_id VARCHAR(255) NOT NULL, event_type VARCHAR(100) NOT NULL, payload_json TEXT, created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP);
